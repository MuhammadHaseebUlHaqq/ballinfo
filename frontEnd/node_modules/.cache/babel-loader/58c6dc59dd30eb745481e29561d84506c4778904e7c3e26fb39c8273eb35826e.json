{"ast":null,"code":"import { io } from 'socket.io-client';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.listeners = new Map();\n  }\n  connect() {\n    if (this.socket) return;\n    this.socket = io(process.env.REACT_APP_API_URL || 'http://localhost:3000', {\n      reconnectionDelay: 1000,\n      reconnection: true,\n      reconnectionAttempts: 10,\n      transports: ['websocket'],\n      agent: false,\n      upgrade: false,\n      rejectUnauthorized: false\n    });\n    this.socket.on('connect', () => {\n      console.log('Connected to WebSocket server');\n    });\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from WebSocket server');\n    });\n    this.socket.on('error', error => {\n      console.error('Socket error:', error);\n    });\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  subscribe(event, callback) {\n    if (!this.socket) this.connect();\n    this.socket.on(event, callback);\n    this.listeners.set(event, callback);\n  }\n  unsubscribe(event) {\n    if (!this.socket) return;\n    const callback = this.listeners.get(event);\n    if (callback) {\n      this.socket.off(event, callback);\n      this.listeners.delete(event);\n    }\n  }\n  subscribeToMatch(matchId) {\n    if (!this.socket) this.connect();\n    this.socket.emit('subscribe_match', matchId);\n  }\n  unsubscribeFromMatch(matchId) {\n    if (!this.socket) return;\n    this.socket.emit('unsubscribe_match', matchId);\n  }\n}\nexport default new SocketService();","map":{"version":3,"names":["io","SocketService","constructor","socket","listeners","Map","connect","process","env","REACT_APP_API_URL","reconnectionDelay","reconnection","reconnectionAttempts","transports","agent","upgrade","rejectUnauthorized","on","console","log","error","disconnect","subscribe","event","callback","set","unsubscribe","get","off","delete","subscribeToMatch","matchId","emit","unsubscribeFromMatch"],"sources":["E:/Muqtasid BS Computer Science/SPRING-25/Project/ballinfo/frontEnd/src/services/socketService.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\nclass SocketService {\r\n    constructor() {\r\n        this.socket = null;\r\n        this.listeners = new Map();\r\n    }\r\n\r\n    connect() {\r\n        if (this.socket) return;\r\n\r\n        this.socket = io(process.env.REACT_APP_API_URL || 'http://localhost:3000', {\r\n            reconnectionDelay: 1000,\r\n            reconnection: true,\r\n            reconnectionAttempts: 10,\r\n            transports: ['websocket'],\r\n            agent: false,\r\n            upgrade: false,\r\n            rejectUnauthorized: false\r\n        });\r\n\r\n        this.socket.on('connect', () => {\r\n            console.log('Connected to WebSocket server');\r\n        });\r\n\r\n        this.socket.on('disconnect', () => {\r\n            console.log('Disconnected from WebSocket server');\r\n        });\r\n\r\n        this.socket.on('error', (error) => {\r\n            console.error('Socket error:', error);\r\n        });\r\n    }\r\n\r\n    disconnect() {\r\n        if (this.socket) {\r\n            this.socket.disconnect();\r\n            this.socket = null;\r\n        }\r\n    }\r\n\r\n    subscribe(event, callback) {\r\n        if (!this.socket) this.connect();\r\n\r\n        this.socket.on(event, callback);\r\n        this.listeners.set(event, callback);\r\n    }\r\n\r\n    unsubscribe(event) {\r\n        if (!this.socket) return;\r\n\r\n        const callback = this.listeners.get(event);\r\n        if (callback) {\r\n            this.socket.off(event, callback);\r\n            this.listeners.delete(event);\r\n        }\r\n    }\r\n\r\n    subscribeToMatch(matchId) {\r\n        if (!this.socket) this.connect();\r\n        this.socket.emit('subscribe_match', matchId);\r\n    }\r\n\r\n    unsubscribeFromMatch(matchId) {\r\n        if (!this.socket) return;\r\n        this.socket.emit('unsubscribe_match', matchId);\r\n    }\r\n}\r\n\r\nexport default new SocketService(); "],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,aAAa,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC9B;EAEAC,OAAOA,CAAA,EAAG;IACN,IAAI,IAAI,CAACH,MAAM,EAAE;IAEjB,IAAI,CAACA,MAAM,GAAGH,EAAE,CAACO,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB,EAAE;MACvEC,iBAAiB,EAAE,IAAI;MACvBC,YAAY,EAAE,IAAI;MAClBC,oBAAoB,EAAE,EAAE;MACxBC,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBC,KAAK,EAAE,KAAK;MACZC,OAAO,EAAE,KAAK;MACdC,kBAAkB,EAAE;IACxB,CAAC,CAAC;IAEF,IAAI,CAACb,MAAM,CAACc,EAAE,CAAC,SAAS,EAAE,MAAM;MAC5BC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAChD,CAAC,CAAC;IAEF,IAAI,CAAChB,MAAM,CAACc,EAAE,CAAC,YAAY,EAAE,MAAM;MAC/BC,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;IACrD,CAAC,CAAC;IAEF,IAAI,CAAChB,MAAM,CAACc,EAAE,CAAC,OAAO,EAAGG,KAAK,IAAK;MAC/BF,OAAO,CAACE,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACzC,CAAC,CAAC;EACN;EAEAC,UAAUA,CAAA,EAAG;IACT,IAAI,IAAI,CAAClB,MAAM,EAAE;MACb,IAAI,CAACA,MAAM,CAACkB,UAAU,CAAC,CAAC;MACxB,IAAI,CAAClB,MAAM,GAAG,IAAI;IACtB;EACJ;EAEAmB,SAASA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACvB,IAAI,CAAC,IAAI,CAACrB,MAAM,EAAE,IAAI,CAACG,OAAO,CAAC,CAAC;IAEhC,IAAI,CAACH,MAAM,CAACc,EAAE,CAACM,KAAK,EAAEC,QAAQ,CAAC;IAC/B,IAAI,CAACpB,SAAS,CAACqB,GAAG,CAACF,KAAK,EAAEC,QAAQ,CAAC;EACvC;EAEAE,WAAWA,CAACH,KAAK,EAAE;IACf,IAAI,CAAC,IAAI,CAACpB,MAAM,EAAE;IAElB,MAAMqB,QAAQ,GAAG,IAAI,CAACpB,SAAS,CAACuB,GAAG,CAACJ,KAAK,CAAC;IAC1C,IAAIC,QAAQ,EAAE;MACV,IAAI,CAACrB,MAAM,CAACyB,GAAG,CAACL,KAAK,EAAEC,QAAQ,CAAC;MAChC,IAAI,CAACpB,SAAS,CAACyB,MAAM,CAACN,KAAK,CAAC;IAChC;EACJ;EAEAO,gBAAgBA,CAACC,OAAO,EAAE;IACtB,IAAI,CAAC,IAAI,CAAC5B,MAAM,EAAE,IAAI,CAACG,OAAO,CAAC,CAAC;IAChC,IAAI,CAACH,MAAM,CAAC6B,IAAI,CAAC,iBAAiB,EAAED,OAAO,CAAC;EAChD;EAEAE,oBAAoBA,CAACF,OAAO,EAAE;IAC1B,IAAI,CAAC,IAAI,CAAC5B,MAAM,EAAE;IAClB,IAAI,CAACA,MAAM,CAAC6B,IAAI,CAAC,mBAAmB,EAAED,OAAO,CAAC;EAClD;AACJ;AAEA,eAAe,IAAI9B,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}