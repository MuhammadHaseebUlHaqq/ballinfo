{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import socketService from'../services/socketService';import'./LiveMatchTicker.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LiveMatchTicker=()=>{const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const sliderRef=useRef(null);useEffect(()=>{// Connect to WebSocket and subscribe to live matches\nsocketService.connect();socketService.subscribe('live_matches',data=>{setMatches(data);setLoading(false);});socketService.subscribe('error',error=>{setError(error.message);setLoading(false);});// Cleanup on unmount\nreturn()=>{socketService.unsubscribe('live_matches');socketService.unsubscribe('error');socketService.disconnect();};},[]);const formatMatchDate=utcDate=>{const date=new Date(utcDate);return new Intl.DateTimeFormat('en-GB',{month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',hour12:false}).format(date);};const scroll=direction=>{if(sliderRef.current){const scrollAmount=300;// Adjust scroll amount as needed\nsliderRef.current.scrollBy({left:direction==='left'?-scrollAmount:scrollAmount,behavior:'smooth'});}};const renderMatchCard=match=>{const isUpcoming=match.isUpcoming;const isLive=!isUpcoming&&match.minute;return/*#__PURE__*/_jsxs(\"div\",{className:`match-card ${isUpcoming?'upcoming':''} ${isLive?'live':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"match-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"match-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"competition\",children:match.competition}),isLive&&/*#__PURE__*/_jsx(\"span\",{className:\"live-badge\",children:\"LIVE\"})]}),isUpcoming?/*#__PURE__*/_jsx(\"span\",{className:\"scheduled-time\",children:formatMatchDate(match.utcDate)}):match.minute&&/*#__PURE__*/_jsxs(\"span\",{className:\"minute\",children:[match.minute,\"'\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-teams\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team home\",children:[/*#__PURE__*/_jsx(\"img\",{src:match.homeTeam.crest,alt:match.homeTeam.name,className:\"team-crest\"}),/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:match.homeTeam.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"match-score\",children:isUpcoming?/*#__PURE__*/_jsx(\"span\",{className:\"vs\",children:\"VS\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"score\",children:match.homeTeam.score}),/*#__PURE__*/_jsx(\"span\",{className:\"score-separator\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"score\",children:match.awayTeam.score})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"team away\",children:[/*#__PURE__*/_jsx(\"img\",{src:match.awayTeam.crest,alt:match.awayTeam.name,className:\"team-crest\"}),/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:match.awayTeam.name})]})]}),match.venue&&/*#__PURE__*/_jsx(\"div\",{className:\"match-venue\",children:/*#__PURE__*/_jsx(\"span\",{children:match.venue})})]},match.id);};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"live-match-ticker loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading matches...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"live-match-ticker error\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"Retry\"})]});}if(!matches.length){return/*#__PURE__*/_jsx(\"div\",{className:\"live-match-ticker no-matches\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No matches found\"})});}const liveMatches=matches.filter(match=>!match.isUpcoming);const upcomingMatches=matches.filter(match=>match.isUpcoming);const allMatches=[...liveMatches,...upcomingMatches];return/*#__PURE__*/_jsxs(\"div\",{className:\"live-match-ticker\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticker-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Matches\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"match-count\",children:[\"(\",allMatches.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"nav-button\",onClick:()=>scroll('left'),\"aria-label\":\"Scroll left\",children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-button\",onClick:()=>scroll('right'),\"aria-label\":\"Scroll right\",children:\"\\u2192\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"matches-slider\",ref:sliderRef,children:allMatches.map(renderMatchCard)})]});};export default LiveMatchTicker;","map":{"version":3,"names":["React","useEffect","useState","useRef","socketService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LiveMatchTicker","matches","setMatches","loading","setLoading","error","setError","sliderRef","connect","subscribe","data","message","unsubscribe","disconnect","formatMatchDate","utcDate","date","Date","Intl","DateTimeFormat","month","day","hour","minute","hour12","format","scroll","direction","current","scrollAmount","scrollBy","left","behavior","renderMatchCard","match","isUpcoming","isLive","className","children","competition","src","homeTeam","crest","alt","name","score","awayTeam","venue","id","onClick","window","location","reload","length","liveMatches","filter","upcomingMatches","allMatches","ref","map"],"sources":["E:/Muqtasid BS Computer Science/SPRING-25/Project/ballinfo/frontEnd/src/components/LiveMatchTicker.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport socketService from '../services/socketService';\r\nimport './LiveMatchTicker.css';\r\n\r\nconst LiveMatchTicker = () => {\r\n    const [matches, setMatches] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const sliderRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Connect to WebSocket and subscribe to live matches\r\n        socketService.connect();\r\n        \r\n        socketService.subscribe('live_matches', (data) => {\r\n            setMatches(data);\r\n            setLoading(false);\r\n        });\r\n\r\n        socketService.subscribe('error', (error) => {\r\n            setError(error.message);\r\n            setLoading(false);\r\n        });\r\n\r\n        // Cleanup on unmount\r\n        return () => {\r\n            socketService.unsubscribe('live_matches');\r\n            socketService.unsubscribe('error');\r\n            socketService.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const formatMatchDate = (utcDate) => {\r\n        const date = new Date(utcDate);\r\n        return new Intl.DateTimeFormat('en-GB', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: false\r\n        }).format(date);\r\n    };\r\n\r\n    const scroll = (direction) => {\r\n        if (sliderRef.current) {\r\n            const scrollAmount = 300; // Adjust scroll amount as needed\r\n            sliderRef.current.scrollBy({\r\n                left: direction === 'left' ? -scrollAmount : scrollAmount,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n    };\r\n\r\n    const renderMatchCard = (match) => {\r\n        const isUpcoming = match.isUpcoming;\r\n        const isLive = !isUpcoming && match.minute;\r\n        \r\n        return (\r\n            <div key={match.id} className={`match-card ${isUpcoming ? 'upcoming' : ''} ${isLive ? 'live' : ''}`}>\r\n                <div className=\"match-header\">\r\n                    <div className=\"match-info\">\r\n                        <span className=\"competition\">{match.competition}</span>\r\n                        {isLive && <span className=\"live-badge\">LIVE</span>}\r\n                    </div>\r\n                    {isUpcoming ? (\r\n                        <span className=\"scheduled-time\">{formatMatchDate(match.utcDate)}</span>\r\n                    ) : (\r\n                        match.minute && <span className=\"minute\">{match.minute}'</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"match-teams\">\r\n                    <div className=\"team home\">\r\n                        <img src={match.homeTeam.crest} alt={match.homeTeam.name} className=\"team-crest\" />\r\n                        <span className=\"team-name\">{match.homeTeam.name}</span>\r\n                    </div>\r\n                    <div className=\"match-score\">\r\n                        {isUpcoming ? (\r\n                            <span className=\"vs\">VS</span>\r\n                        ) : (\r\n                            <>\r\n                                <span className=\"score\">{match.homeTeam.score}</span>\r\n                                <span className=\"score-separator\">-</span>\r\n                                <span className=\"score\">{match.awayTeam.score}</span>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"team away\">\r\n                        <img src={match.awayTeam.crest} alt={match.awayTeam.name} className=\"team-crest\" />\r\n                        <span className=\"team-name\">{match.awayTeam.name}</span>\r\n                    </div>\r\n                </div>\r\n                {match.venue && (\r\n                    <div className=\"match-venue\">\r\n                        <span>{match.venue}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"live-match-ticker loading\">\r\n                <div className=\"loader\"></div>\r\n                <p>Loading matches...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"live-match-ticker error\">\r\n                <p>{error}</p>\r\n                <button onClick={() => window.location.reload()}>Retry</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!matches.length) {\r\n        return (\r\n            <div className=\"live-match-ticker no-matches\">\r\n                <p>No matches found</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const liveMatches = matches.filter(match => !match.isUpcoming);\r\n    const upcomingMatches = matches.filter(match => match.isUpcoming);\r\n    const allMatches = [...liveMatches, ...upcomingMatches];\r\n\r\n    return (\r\n        <div className=\"live-match-ticker\">\r\n            <div className=\"ticker-header\">\r\n                <div className=\"header-left\">\r\n                    <h2>Matches</h2>\r\n                    <span className=\"match-count\">({allMatches.length})</span>\r\n                </div>\r\n                <div className=\"navigation-buttons\">\r\n                    <button className=\"nav-button\" onClick={() => scroll('left')} aria-label=\"Scroll left\">\r\n                        ←\r\n                    </button>\r\n                    <button className=\"nav-button\" onClick={() => scroll('right')} aria-label=\"Scroll right\">\r\n                        →\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className=\"matches-slider\" ref={sliderRef}>\r\n                {allMatches.map(renderMatchCard)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LiveMatchTicker; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}